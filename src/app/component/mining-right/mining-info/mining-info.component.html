

<p>采矿权 > 采矿权项目信息</p>
<div>
<div class="ui-g-12 ui-md-4" style="float:left">
        <button pButton type="button"  label="新增" (click)="setMining('add')"></button>
</div>
<div style="float: right;margin-bottom: 10px" [hidden]="!queryDisplay">
        <span style="margin-right:10px">项目名称</span>
        <p-autoComplete [(ngModel)]="filteredProjectName" [suggestions]="filteredProject" (completeMethod)="filteredName($event)"
            placeholder="输入项目名称" ></p-autoComplete>
            <span style="margin-right:10px;margin-left: 10px">矿权人</span>
            <p-autoComplete [(ngModel)]="filteredOwnerName"
            placeholder="输入矿权人" ></p-autoComplete>
        <button pButton  type="button" label="查询" (click)="setMining('filtered')"></button>
</div>
  <div style="clear: both;" class="p-table">
      <p-table [columns]="miningInfoTitle" [value]="miningInfoValue"  [rows]="10"  [loading]="loading">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns">
                    {{col.header}}
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
                <td *ngFor="let col of columns">
                    <span *ngIf = "col.field !== 'operation'" title=" {{rowData[col.field]}}"> {{rowData[col.field]}}</span>
                    <span *ngIf = "col.field == 'operation'" class="operation-icon"  (click)="goDetails(rowData,'detail')">详情</span>
                    <span *ngIf = "col.field == 'operation' && modifyButton" class="operation-icon"  (click)="goDetails(rowData,'modify')">编辑</span>
                    <span *ngIf = "col.field == 'operation' && deleteDisplay" class="operation-icon"  (click)="setMining('delete',rowData)">删除</span>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
                <div style="text-align: right;">
                   共{{projectTotal}}条
                </div>
        </ng-template>
      </p-table>
      <p-paginator [hidden]="!projectTotal" [rows]="LIMIT_LOGIN" [totalRecords]="projectTotal" [rowsPerPageOptions]="[10,20,30]" (onPageChange)="pageChange($event,'project')"></p-paginator>
  </div>
</div>


<div class="dialog-class textarea-style">
        <!-- 矿权项目增加弹出框 -->
     <p-dialog header="新增探矿权项目" [(visible)]="miningInfoDisplay"  [maximizable]="true" [modal]="true" [responsive]="true" [style]="{width: '800px'}">
           <form>
               <div class="form-group has-feedback">
                   <label class="control-label">项目名称</label>
                   <input  type="text" style="width:700px !important"  [(ngModel)]="miningProject.projectName" name="projectName"  class="form-control">
               </div>
               <div class="form-group has-feedback">
                 <label class="control-label">项目定位区域</label>
                 <button type="button" pButton (click)="viewMap()" label="查看"></button>
               </div>  
               <div class="form-group has-feedback">
                    <label class="control-label">探矿权首立时间</label>
                    <div>
                        <p-calendar 
                          [showIcon]="true" 
                          [(ngModel)]="explorationStartTime" 
                          name="explorationStartTime" 
                          [monthNavigator]="true" 
                          [yearNavigator]="true" 
                          yearRange="1970:2030"
                          dateFormat="yy.mm.dd"
                        >
                        </p-calendar>
                    </div>    
                </div>
                <div class="form-group has-feedback">
                        <label class="control-label">探矿权范围</label>
                        <input type="text" style="width:700px !important" name="explorationArea" class="form-control" [(ngModel)]="miningProject.explorationArea">
                </div>
               <div class="form-group has-feedback">
                   <label class="control-label">采矿权首立时间</label>
                   <div>
                       <p-calendar 
                         [showIcon]="true" 
                         [(ngModel)]="miningStartTime" 
                         name="miningStartTime" 
                         [monthNavigator]="true" 
                         [yearNavigator]="true" 
                         yearRange="1970:2030"
                         dateFormat="yy.mm.dd"
                       >
                       </p-calendar>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">采矿权范围</label>
                   <input type="text" style="width:700px !important" name="miningArea" class="form-control" [(ngModel)]="miningProject.miningArea">
               </div>
               <div class="form-group has-feedback" >
                   <label class="control-label">勘查阶段/报告成果</label>
                   <div>
                       <textarea rows="5" style="width:700px" cols="30" pInputTextarea [(ngModel)]="miningProject.investigationFinalStage" name="investigationFinalStage"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">区域地质背景</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.areaGeologicBackground" name="areaGeologicBackground"></textarea>
                   </div>
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">地球物理及地球化学特性</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.geophysicalGeochemical" name="geophysicalGeochemical"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">矿区地质背景:地层</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.mineralGeologicalStratum" name="mineralGeologicalStratum"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">矿区地质背景:构造</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.mineralGeologicalStructure" name="mineralGeologicalStructure"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">矿区地质背景:岩浆岩</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.mineralGeologicalMagmatite" name="mineralGeologicalMagmatite"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">成矿带归属</label>
                   <input type="text" style="width:700px !important" name="uri" class="form-control" [(ngModel)]="miningProject.mineralBeltOwner" name="mineralBeltOwner">
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">成矿带地质背景</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.mineralBeltGeologic" name="mineralBeltGeologic"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">围岩及蚀变</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.rockAlteration" name="rockAlteration"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">矿(化)体特征</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.mineralCharacteristics" name="mineralCharacteristics"></textarea>
                       <label class="control-label">主要成果</label>
                   </div>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.majorAchievement" name="majorAchievement"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">初步认识</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.preliminaryUnderstanding" name="preliminaryUnderstanding"></textarea>
                   </div>    
               </div>
               <div class="form-group has-feedback">
                   <label class="control-label">存在的问题以及下一步工作</label>
                   <div>
                       <textarea rows="5" cols="30" style="width:700px" pInputTextarea [(ngModel)]="miningProject.remarks" name="remarks"></textarea>
                   </div>    
               </div>
           </form>
           <div id="projectMap" class="map"></div>
           <p-footer>
               <button type="button" pButton (click)="saveProject()" label="保存"></button>
               <button type="button" pButton icon="pi pi-close" (click)="miningInfoDisplay = false" label="取消" class="ui-button-secondary"></button>
           </p-footer>
       </p-dialog>
   </div>